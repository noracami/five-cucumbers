<% game = @game %>
<% current_player = @current_player %>
<%= turbo_stream_from dom_id(game) %>
<div class="h-screen flex flex-col gap-5 flex-wrap">
  <div class="flex-grow grid grid-cols-12 gap-5 p-5 border-secondary border-2">
    <div class="col-span-8 flex flex-col gap-5 justify-around">
      <div class="p-2 text-white text-2xl border-secondary border-2 h-1/3">
        <p>Room ID: <%= game.room_id %></p>
        <p>Game URL: <%= frontend_game_url %></p>
        <p>Player Numbers: <%= game.players.size %></p>
        <%= render 'frontend/games/game_rounds', game:, game_status: game.current_rounds || game.state %>
      </div>
      <div class="p-2 text-white text-4xl h-full">
        <p>Table</p>
        <div class="grid grid-cols-12 gap-5 p-5 h-full">
          <div class="col-span-10 flex justify-center items-center gap-10 p-2 w-full">
            <% game.remaining_players.each do |player| %>
              <% if player.card_played %>
                <div class="border-2 rounded-2xl border-white h-1/2 min-w-24 max-w-28">
                  <div class="flex justify-center items-center h-full">
                    <%= player.card_played %>
                  </div>
                </div>
              <% else %>
                <div class="border-2 rounded-2xl border-white h-1/2 min-w-24 max-w-28 animate-pulse">
                  <div class="flex justify-center items-center h-full">
                    <img src="/cucumber.png" alt="" sizes="64px" class="w-16 grayscale">
                  </div>
                </div>
              <% end %>
            <% end %>
          </div>
          <div class="col-span-2 text-end text-base font-mono">
            <% 6.times do |thing| %>
              <div><%= ([thing] * 6).join('-') %></div>
            <% end %>
          </div>
        </div>
      </div>
      <div class="p-2 text-white text-4xl border-purple-500 border-2 h-3/5">
        <p>ACTIONS</p>
        <%= render 'actions', game:, current_player: %>
      </div>
    </div>
    <div class="col-end-13 col-span-4 border-secondary border-2">
      <p class="text-white">玩家：自己、其他</p>
      <p></p>
      <%= render 'game_players', game: game %>
    </div>
  </div>
  <div class="h-min p-2 bg-slate-800 text-yellow-300">
    <div>
      This game is currently in development.
      You can check the <%= link_to 'repo', 'https://github.com/noracami/five-cucumbers', target: '_blank', class: 'text-blue-500 underline' %> for the latest updates.
    </div>
    <div>
      <a href="https://www.flaticon.com/free-icons/cucumber" title="cucumber icons" target="_blank" class="underline">Cucumber icons created by kerismaker - Flaticon</a>
    </div>
  </div>
</div>
<div>
  <p id="some_target">some_target</p>
  <%= button_to '123',
    click_btn_frontend_v1_game_path,
    class: "button button-red"
    # turbo_method: :post
    %>
</div>
<div>
  <section class="card-mono">
    <header class="p-2 text-secondary">MY STATUS</header>
    <% if false %>
      <div class="p-2 text-primary text-2xl">
        <p>Nickname: <span class="text-pink-500"><%= session.dig("user_info", "nickname") %></span></p>
        <p>ID: <span class="text-pink-500"><%= current_player_id %></span></p>
        <%= render 'self_status', cucumbers: current_player.cucumbers %>
      </div>
    <% end %>
  </section>
  <section class="card-mono">
    <header class="p-2 text-secondary">ACTIONS</header>
    <% if false %>
    <% end %>
  </section>
  <section class="card-mono">
    <header class="p-2 text-secondary">GAME STATE</header>
    <% if false %>
      <%= render 'game_state', game: %>
    <% end %>
  </section>
  <% if Rails.env.development? %>
    <%= render 'game_redis_logs', game:, redis_logs: Utils::Redis.logs(game.uuid) %>
  <% end %>
</div>
